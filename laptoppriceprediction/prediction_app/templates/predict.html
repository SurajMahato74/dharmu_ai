{% extends "base.html" %}
{% load static %}

{% block content %}

<div class="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 py-12 px-4">
  <div class="max-w-7xl mx-auto">

    <!-- Header -->
    <div class="text-center mb-12">
      <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">
        ðŸ’» Laptop Price Prediction System
      </h1>
      <p class="text-xl text-gray-600">Get accurate price predictions for your dream laptop configuration!</p>
    </div>

    <!-- Loading Indicator -->
    <div id="loadingIndicator" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
      <div class="bg-white p-8 rounded-3xl shadow-2xl">
        <div class="flex items-center space-x-4">
          <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
          <span class="text-lg font-semibold">ðŸ”® Analyzing configuration...</span>
        </div>
      </div>
    </div>

    <!-- Configuration Panel - At Top -->
    <div class="mb-8">
      <div class="bg-white rounded-3xl shadow-2xl p-6 md:p-8">
        <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
          ðŸŽ¯ Configuration
        </h2>
        
        <form class="grid md:grid-cols-2 lg:grid-cols-3 gap-6" id="laptopForm">

          <!-- Brand -->
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">Brand</label>
            <select name="brand" id="brand" required class="w-full px-4 py-3 text-sm bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
              <option value="" disabled selected>Choose brand</option>
              <option value="HP">HP</option>
              <option value="Dell">Dell</option>
              <option value="Lenovo">Lenovo</option>
              <option value="Asus">Asus</option>
              <option value="Acer">Acer</option>
              <option value="Apple">Apple</option>
              <option value="MSI">MSI</option>
              <option value="Samsung">Samsung</option>
              <option value="Infinix">Infinix</option>
              <option value="Xiaomi">Xiaomi</option>
            </select>
          </div>

          <!-- Processor -->
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">Processor</label>
            <select name="processor" id="processor" required class="w-full px-4 py-3 text-sm bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              <option value="" disabled selected>Select processor</option>
              <option value="12th Gen Intel Core i5">12th Gen Intel Core i5</option>
              <option value="13th Gen Intel Core i7">13th Gen Intel Core i7</option>
              <option value="11th Gen Intel Core i5">11th Gen Intel Core i5</option>
              <option value="5th Gen AMD Ryzen 5">5th Gen AMD Ryzen 5</option>
              <option value="7th Gen AMD Ryzen 7">7th Gen AMD Ryzen 7</option>
              <option value="12th Gen Intel Core i7">12th Gen Intel Core i7</option>
              <option value="13th Gen Intel Core i5">13th Gen Intel Core i5</option>
              <option value="11th Gen Intel Core i7">11th Gen Intel Core i7</option>
              <option value="5th Gen AMD Ryzen 7">5th Gen AMD Ryzen 7</option>
            </select>
          </div>

          <!-- RAM -->
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">RAM (GB)</label>
            <select name="ram" id="ram" required class="w-full px-4 py-3 text-sm bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              <option value="" disabled selected>Select RAM</option>
              <option value="4">4 GB</option>
              <option value="8">8 GB</option>
              <option value="16">16 GB</option>
              <option value="32">32 GB</option>
              <option value="64">64 GB</option>
            </select>
          </div>

          <!-- Storage -->
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">Storage (GB)</label>
            <select name="storage" id="storage" required class="w-full px-4 py-3 text-sm bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              <option value="" disabled selected>Select storage</option>
              <option value="128">128 GB</option>
              <option value="256">256 GB</option>
              <option value="512">512 GB</option>
              <option value="1024">1024 GB (1TB)</option>
              <option value="2048">2048 GB (2TB)</option>
            </select>
          </div>

          <!-- Storage Type -->
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">Storage Type</label>
            <select name="storage_type" id="storage_type" required class="w-full px-4 py-3 text-sm bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              <option value="" disabled selected>Select storage type</option>
              <option value="SSD">SSD</option>
              <option value="Hard-Disk">Hard Disk</option>
            </select>
          </div>

          <!-- Display Size -->
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">Display Size (inches)</label>
            <input type="number" step="0.1" name="display_size" id="display_size" placeholder="e.g. 15.6" min="11" max="18" value="15.6" required 
                   class="w-full px-4 py-3 text-sm bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
          </div>

          <!-- Resolution -->
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">Screen Resolution</label>
            <select name="resolution" id="resolution" required class="w-full px-4 py-3 text-sm bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              <option value="" disabled selected>Select resolution</option>
              <option value="1366x768">1366x768 (HD)</option>
              <option value="1920x1080">1920x1080 (Full HD)</option>
              <option value="2560x1440">2560x1440 (QHD)</option>
              <option value="3840x2160">3840x2160 (4K UHD)</option>
            </select>
          </div>

          <!-- GPU -->
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">Graphics Card</label>
            <select name="gpu" id="gpu" required class="w-full px-4 py-3 text-sm bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              <option value="" disabled selected>Select graphics card</option>
              <option value="Intel Integrated">Intel Integrated</option>
              <option value="Intel Iris Xe">Intel Iris Xe</option>
              <option value="NVIDIA GeForce RTX 3050">NVIDIA GeForce RTX 3050</option>
              <option value="NVIDIA GeForce RTX 4060">NVIDIA GeForce RTX 4060</option>
              <option value="AMD Radeon">AMD Radeon</option>
              <option value="NVIDIA GeForce GTX 1650">NVIDIA GeForce GTX 1650</option>
            </select>
          </div>

          <!-- Operating System -->
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">Operating System</label>
            <select name="os" id="os" required class="w-full px-4 py-3 text-sm bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              <option value="" disabled selected>Select OS</option>
              <option value="Windows 11 OS">Windows 11</option>
              <option value="Windows 10 OS">Windows 10</option>
              <option value="Mac OS">macOS</option>
              <option value="DOS OS">DOS</option>
              <option value="Chrome OS">Chrome OS</option>
            </select>
          </div>

          <!-- Specification Rating -->
          <div class="md:col-span-2 lg:col-span-1">
            <label class="block text-sm font-semibold text-gray-700 mb-2">Specification Rating</label>
            <input type="range" name="spec_rating" id="spec_rating" min="50" max="90" value="70" step="1"
                   class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
            <div class="flex justify-between text-xs text-gray-500 mt-1">
              <span>50</span>
              <span id="spec_rating_value">70</span>
              <span>90</span>
            </div>
          </div>

          <!-- Weight -->
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">Weight (kg)</label>
            <input type="number" step="0.1" name="weight" id="weight" placeholder="e.g. 2.1" min="0.5" max="5" value="2.1" required 
                   class="w-full px-4 py-3 text-sm bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
          </div>

          <!-- Warranty -->
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">Warranty (years)</label>
            <select name="warranty" id="warranty" required class="w-full px-4 py-3 text-sm bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
              <option value="" disabled selected>Select warranty</option>
              <option value="1">1 Year</option>
              <option value="2">2 Years</option>
              <option value="3">3 Years</option>
            </select>
          </div>

          <!-- Predict Button -->
          <div class="md:col-span-2 lg:col-span-3 mt-4">
            <button type="submit" class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold py-4 px-6 rounded-xl hover:from-indigo-700 hover:to-purple-700 transform hover:scale-105 transition duration-300 shadow-lg">
              ðŸ”® Predict Price
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Results Section -->
    <div class="grid lg:grid-cols-2 gap-8" id="resultsSection" style="display: none;">
      
      <!-- Prediction Result -->
      <div class="bg-white rounded-3xl shadow-2xl p-6 md:p-8">
        <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
          ðŸ’° Price Prediction
        </h2>
        <div id="predictionResult" class="text-center">
          <div class="text-4xl font-bold text-indigo-600 mb-2" id="predictedPrice">â‚¹0</div>
          <p class="text-gray-600">Estimated Price</p>
        </div>
      </div>

      <!-- Configuration Summary -->
      <div class="bg-white rounded-3xl shadow-2xl p-6 md:p-8">
        <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
          ðŸ“‹ Configuration Summary
        </h2>
        <div id="configSummary" class="space-y-2">
          <!-- Summary will be populated by JavaScript -->
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// Update range slider display
document.getElementById('spec_rating').addEventListener('input', function() {
  document.getElementById('spec_rating_value').textContent = this.value;
});

// Handle form submission
document.getElementById('laptopForm').addEventListener('submit', function(e) {
  e.preventDefault();
  
  // Show loading indicator
  document.getElementById('loadingIndicator').classList.remove('hidden');
  
  // Collect form data
  const formData = new FormData(this);
  
  // Simulate API call (replace with actual endpoint)
  setTimeout(() => {
    // Hide loading indicator
    document.getElementById('loadingIndicator').classList.add('hidden');
    
    // Show results section
    document.getElementById('resultsSection').style.display = 'grid';
    
    // Update prediction (mock result)
    const mockPrice = Math.floor(Math.random() * 100000) + 30000;
    document.getElementById('predictedPrice').textContent = `â‚¹${mockPrice.toLocaleString()}`;
    
    // Update configuration summary
    const summary = document.getElementById('configSummary');
    summary.innerHTML = `
      <div class="flex justify-between"><span>Brand:</span><span>${formData.get('brand')}</span></div>
      <div class="flex justify-between"><span>Processor:</span><span>${formData.get('processor')}</span></div>
      <div class="flex justify-between"><span>RAM:</span><span>${formData.get('ram')} GB</span></div>
      <div class="flex justify-between"><span>Storage:</span><span>${formData.get('storage')} GB ${formData.get('storage_type')}</span></div>
      <div class="flex justify-between"><span>Display:</span><span>${formData.get('display_size')}" ${formData.get('resolution')}</span></div>
      <div class="flex justify-between"><span>Graphics:</span><span>${formData.get('gpu')}</span></div>
      <div class="flex justify-between"><span>OS:</span><span>${formData.get('os')}</span></div>
      <div class="flex justify-between"><span>Weight:</span><span>${formData.get('weight')} kg</span></div>
      <div class="flex justify-between"><span>Warranty:</span><span>${formData.get('warranty')} years</span></div>
    `;
    
    // Scroll to results
    document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
  }, 2000);
});
</script>

{% endblock %}